---
import { type CollectionEntry, getCollection } from "astro:content";
import { Icon } from "astro-icon/components";
import BaseLayout from "@/layouts/BaseLayout.astro"
import CustomLink from "@/components/CustomLink.astro";
import Container from "@/components/Container.astro";
import PageTitle from "@/components/PageTitle.astro";
import LinkMod from "@/components/LinkMod.astro";
import Prose from "@/components/Prose.astro";
import { getFormattedDate } from '@/utils/commonFunctions';
import { getAllPublishedPosts } from "@/utils/blogFunctions";


export async function getStaticPaths() {
  const articles = await getAllPublishedPosts();

  return articles.map((article) => {
    return {
      params: {
        slug: article.slug,
      },
      props: {
        article,
      },
    };
  });
}

const {
  article,
  article: {
    slug,
    data: { title, tags, publishedDate, featuredImage, },
  },
} = Astro.props;

const { Content } = await article.render();
const collection = article.collection;

---
<BaseLayout pageTitle={""} pageDesc={""}>
	<Container additinalClasses="flex mt-12">
		<article class="flex flex-col space-y-5 rounded-xl">
			<div class="flex items-center">
        <LinkMod href={`/${collection}`} style={"hover"} size="sm" class="text-sm items-center hover:p-2 flex">
          <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M21 11H6.414l5.293-5.293-1.414-1.414L2.586 12l7.707 7.707 1.414-1.414L6.414 13H21z"></path></svg>
          &nbsp All Articles
        </LinkMod>
      </div>
      <div class="space-y-5">
        <!-- Post title and meta -->
        <div class="mb-8">
        {
          <h1 class="text-2xl font-bold mb-2">{title}</h1>
          <time class="text-md font-base text-neutral-500">{getFormattedDate(publishedDate)}</time>
        }
        </div>
        <!-- Post content -->
        <Prose>
          <Content />
        </Prose>
      </div>
		</article>
	</Container>
</BaseLayout>